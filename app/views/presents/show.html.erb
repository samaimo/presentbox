<%= render 'presents/header' %>
<!--メイン-->
<main>
  <div class="contents-wrap">
    <div class="left-side">
      <%#= render 'left_side' %>
      <%= form_with(model: [@present, @memo], url: present_memos_path(@present), method: :post, html: { multipart: true }) do |f| %>
      <div class="memo-input">
        <div class="memo-wrap">
          <%= f.text_area :text, class: 'memo-inputbox' %>
          <label>
            <!-- ▽見せる部分 -->
            <span class="filelabel" title="ファイルを選択">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
                <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
              </svg>
            </span>
            <!-- ▽本来の選択フォームは隠す -->
            <%= f.file_field :image, class: "filesend" %>
          </label>
        </div>

        <label>
          <!-- ▽見せる部分 -->
          <span class="send" title="投稿する">
            <!-- ここに表示したいボタンデザインの画像を入れる -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-journal-plus" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5z"/>
              <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
              <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
            </svg>
          </span>
          <!-- ▽本来の選択フォームは隠す -->
          <%= f.submit "投稿する", class: "filesend" %>
        </label>
      
      </div>
      <% end %>
      <!--投稿内容表示-->
      <div class="left-grid">
        <% @memos.each do |memo| %>
            <div class="memo-post">
              <% if memo.image.present? %>
                <%= image_tag memo.image, class: "left-image" %>
                  <p class="minus">
                    <%= link_to present_memo_path(memo.id), data: { turbo_method: :delete } do %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                      </svg>
                    <% end %>
                  </p>
              <% end %>

              <% if memo.text.present? %>
                  <div class="memo-set">
                    <div class="balloon">
                        <p class="add-memo">
                          <%= memo.text %>
                        </p>
                    </div>
                  <p class="minus">
                    <%= link_to present_memo_path(memo.id), data: { turbo_method: :delete } do %>
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                      </svg>
                    <% end %>
                  </p>
                  </div>
                  
              <% end %>

            </div>
        <% end %>

      </div>
    </div>
    <div class="center">
      <!--メイン表示-->
      <% if current_user == @present.user %>
        <%= render 'shared/edit-destroy' %>
      <% end %>
      <%= render 'show' %>
    </div>
    <div class="right-side">
      
    </div>
  </div>
</main>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.3.2/dist/confetti.browser.min.js"></script>
<script>
  confetti({
    particleCount: 100,
    spread: 70,
    origin: { y: 0.6 }
  });
</script>
